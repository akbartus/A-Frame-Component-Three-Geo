# A-Frame Component: Three-Geo (Updated Version)
<img src="img/screenshot.gif" title="Video screen capture" alt="Video screen capture" height="400">

### **Description / Rationale**
This is an updated version of A-Frame component for "Three-geo", <a href="https://github.com/w3reality/three-geo">the library for 3D geographic visualization</a>.  The original version of the component was developed by <a href="https://github.com/w3reality/three-geo/issues/1">KJStrand</a>. Th updated version of the component is compativle with latest version of A-frame and has the following new features:
* The component and three-geo files were combined into single file;
* Flat map style was added;
* Possibility of selecting the style of the map: elevated, wireframe and contour
* Possibility of assigning color to wireframe styled map.   

### **Instructions**
In order to use the component attach "three-geo" to any entity. The component has the following attributes: 
* <b>token: { type: 'string', default: '*******' }</b> - Token generated by Mapbox.
* <b>lat: { type: 'number', default: 35.3778 }</b> - latitude of the location on Mapbox.
* <b>lng: { type: 'number', default: 138.7472 }</b> - longitude of the location on Mapbox.
* <b>radius: { type: 'number', default: 5.0 }</b> - radius of bounding circle (km).
* <b>zoom: { type: 'number', default: 10 }</b> - zoom level.
* <b>axesHelper: { type: 'boolean', default: false }</b> - Axes helper to learn about orientation in 3d space.
* <b>flatMap: { type: 'boolean', default: false }</b> - Flat map style without any elevations.
* <b>mapStyle: { type: 'string', default: "elevated" }</b> - The following map styles are present: elevated, wireframe and contour. Will show if flatMap is false. 
* <b>wireframeColor: { type: 'color', default: "#ffffff" }</b> - if wireframe map style is selected, allows to change the color of the wireframe. 

The code below shows the sample implementation of the component:
```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A-Frame Component: Three-geo (Updated)</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="js/three-geo-component.js">
    </script>
</head>
<body>
    <a-scene>
        <a-entity id="first" three-geo="token: your-mapbox-token-here;
                   lat: 36.2058;
                   lng:  -112.4413;
                   radius: 5;
                   zoom: 13;
                   axesHelper: false;
                   flatMap: false;
                   mapStyle: elevated;
                   wireframeColor: #ffffff;
                   " rotation="-90 180 0" position="0 0.7 -1.5" scale="2 2 2"></a-entity>
                   <a-sky color="#000000"></a-sky>
    </a-scene>
</body>
</html>
```
<b>Please note:</b> 
* Gltf entity is not visible by default. If you want to see how 3D model and point cloud is located in 3d space, make it visible.
* Make sure that there is only one gltf entity with id="origin" and at least one gltf entity with id="target".   
* It is possible to change point cloud positions and rotations. If you decide to do so, please do make sure to make positions and rotatons the same for all gltf entities or just apply to the entity with id='origin'.   
* It is possible, however, to apply different scales for different GLTF entities.
* Make sure to apply "gltf-transitions" component only to gltf entity with id="origin". 


### **Recommendations**
Not all GLTF models will work equally well. It is important to prepare models beforehand. Make sure to do the following:
* Number of faces of each GLTF file should be close to each other. This is required because generated point cloud points of one GLTF will get transitioned to another one. And if there are less points in the origin GLTF model, then target GLTF model's point cloud will not show completely.
* To make number of faces almost similar, use Blender's functionality for decimating geometry (when there is a need to reduce number of faces) or subdivide (to increase number of faces).
* Make sure, if possible, to combine all meshes into single mesh. This will help in generating the point cloud.
* The more faces are there in a GLTF model, the better it looks visually. However, the more faces also mean slower running experiences.

### **Tech Stack**
The project is powered by AFrame and Three.js. The models used in the example were taken from Poly Pizza (<a href="https://poly.pizza/m/bHyQe5jzdiQ">House</a>, <a href="https://poly.pizza/m/2cAXk_gG3Eh">shoes</a>) and Three.js library.

### **Demo**
See demo of the component here: [Demo](https://pointcloud-transitions.glitch.me/)
